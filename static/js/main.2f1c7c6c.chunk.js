(this["webpackJsonpdevice-test"]=this["webpackJsonpdevice-test"]||[]).push([[0],{15:function(e,t,c){},23:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(16),o=c.n(a),i=(c(23),c(18)),s=c(2),b=c(7),j=c(8),l=c.n(j),d=c(9),u=c(6),O=c(17),v=c.n(O),x=(c(15),c(1));function f(){var e=Object(n.useState)({access:!1,recorder:null,error:""}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)({active:!1,available:!1,url:""}),o=Object(u.a)(a,2),i=o[0],s=o[1],j=Object(n.useRef)([]),O=Object(n.useRef)(null);Object(n.useEffect)((function(){f()}),[O]);var f=function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:300,height:300}}).then((function(e){var t,c=O.current;c.muted=!0,c.srcObject=e,c.play();try{t=new MediaRecorder(e,{mimeType:"video/webm"})}catch(n){console.log(n)}t.stream.getTracks()[0].onended=function(){return console.log("ended")},t.onstart=function(){console.log("Video recording started"),s({active:!0,available:!1,url:""})},t.ondataavailable=function(e){console.log("data available",e.data),j.current.push(e.data)},t.onstop=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("stopped"),t=URL.createObjectURL(j.current[0]),console.log("url",t),j.current=[],s({active:!1,available:!0,url:t});case 5:case"end":return e.stop()}}),e)}))),r(Object(b.a)(Object(b.a)({},e),{},{access:!0,recorder:t}))})).catch((function(e){console.error("error:",e)}))};return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsxs)("div",{className:"audio-container",children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{disabled:i.active,onClick:function(){return!i.active&&c.recorder.start()},children:"Start Recording"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{disabled:!i.active,onClick:function(){return c.recorder.stop()},children:"Stop Recording"}),i.available&&Object(x.jsx)(v.a,{url:i.url,controls:!0,width:"300px",height:"300px"})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("video",{id:"player",ref:O})]})}function h(){var e=Object(n.useState)({access:!1,recorder:null,error:""}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)({active:!1,available:!1,url:""}),o=Object(u.a)(a,2),i=o[0],s=o[1],j=Object(n.useRef)([]);return navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){console.log(e.kind+": "+e.label+" id = "+e.deviceId)}))})).catch((function(e){console.log(e.name+": "+e.message)})),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),c.access?Object(x.jsxs)("div",{className:"audio-container",children:[Object(x.jsx)("button",{className:i.active?"active":null,disabled:i.active,onClick:function(){return!i.active&&c.recorder.start()},children:"Start Recording"}),i.active&&Object(x.jsx)("p",{children:"Recording in progress "}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{disabled:!i.active,onClick:function(){return c.recorder.stop()},children:"Stop Recording"}),i.available&&Object(x.jsx)("audio",{controls:!0,src:i.url})]}):Object(x.jsx)("button",{onClick:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){alert("Got permission"),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t;try{t=new MediaRecorder(e,{mimeType:"audio/webm"})}catch(n){console.log(n)}t.stream.getTracks()[0].onended=function(){return console.log("ended")},t.onstart=function(){s({active:!0,available:!1,url:""})},t.ondataavailable=function(e){console.log("data available"),j.current.push(e.data)},t.onstop=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("stopped"),t=URL.createObjectURL(j.current[0]),j.current=[],s({active:!1,available:!0,url:t});case 4:case"end":return e.stop()}}),e)}))),r(Object(b.a)(Object(b.a)({},c),{},{access:!0,recorder:t}))})).catch((function(e){console.log(e),r(Object(b.a)(Object(b.a)({},c),{},{error:e}))}))})).catch((function(e){console.error("Error accessing media devices.",e)}))},children:"Geta Mic Access"})]})}var p=function(){var e=Object(s.f)();return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:function(){return e("/video")},children:" Check video"}),Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:function(){return e("/audio")},children:" Check audio"})]})},g=function(){return Object(x.jsx)(i.a,{children:Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)(s.c,{children:[Object(x.jsx)(s.a,{path:"/device-test",element:Object(x.jsx)(p,{})}),Object(x.jsx)(s.a,{path:"/video",element:Object(x.jsx)(f,{})}),Object(x.jsx)(s.a,{path:"/audio",element:Object(x.jsx)(h,{})})]})})})},m=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,49)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),r(e),a(e),o(e)}))};o.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(g,{})}),document.getElementById("root")),m()}},[[48,1,2]]]);
//# sourceMappingURL=main.2f1c7c6c.chunk.js.map