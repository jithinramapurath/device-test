(this["webpackJsonpdevice-test"]=this["webpackJsonpdevice-test"]||[]).push([[0],{34:function(e,t,c){},61:function(e,t,c){},89:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(49),i=c.n(a),o=(c(61),c(50)),s=c(5),l=c(33),j=c(27),b=c.n(j),u=c(35),d=c(7),O=c(36),x=c.n(O),v=c(106),f=c(110),h=c(108),p=c(109),g=(c(34),c(1));function m(){var e=Object(r.useState)({access:!1,recorder:null,error:""}),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)({active:!1,available:!1,url:""}),i=Object(d.a)(a,2),o=i[0],s=i[1],j=Object(r.useRef)([]),O=Object(r.useRef)(null);Object(r.useEffect)((function(){w()}),[O]);var m=window.navigator.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];console.log("browser",m[1]);var w=function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:563,height:430}}).then((function(e){var t,c=O.current;c.muted=!0,c.setAttribute("playsinline",!0),c.srcObject=e,c.play();try{t=new MediaRecorder(e,{mimeType:"Safari"===m[1]?"video/mp4":"video/webm"})}catch(r){console.log(r)}t.stream.getTracks()[0].onended=function(){return console.log("ended")},t.onstart=function(){console.log("Video recording started"),s({active:!0,available:!1,url:""})},t.ondataavailable=function(e){console.log("data available",e.data),j.current.push(e.data)},t.onstop=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("stopped"),t=URL.createObjectURL(j.current[0]),console.log("url",t),j.current=[],s({active:!1,available:!0,url:t});case 5:case"end":return e.stop()}}),e)}))),n(Object(l.a)(Object(l.a)({},e),{},{access:!0,recorder:t}))})).catch((function(e){console.error("error:",e)}))};return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("div",{className:"audio-container",children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{disabled:o.active,onClick:function(){return!o.active&&c.recorder.start()},children:"Start Recording"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{disabled:!o.active,onClick:function(){return c.recorder.stop()},children:"Stop Recording"}),o.available&&Object(g.jsx)(x.a,{url:o.url,controls:!0,width:"563px",height:"430px",id:"react"})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{id:"video_box",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("video",{id:"video",ref:O,children:"Your browser does not support this streaming content."}),Object(g.jsxs)("div",{id:"actionBtn",children:[Object(g.jsx)(f.a,{value:"end",control:Object(g.jsx)(v.a,Object(l.a)(Object(l.a)({},{inputProps:{"aria-label":"Hide video for me"}}),{},{defaultChecked:!0,size:"small"})),label:Object(g.jsx)(h.a,{color:"#00405E",children:"Hide video for me"}),labelPlacement:"end",sx:{display:"flex",marginTop:"5px"}}),Object(g.jsx)(f.a,{value:"end",control:Object(g.jsx)(p.a,{disableRipple:!0,sx:{textTransform:"none"},size:"small",onClick:function(){return c.recorder.stop()},children:Object(g.jsx)(h.a,{color:"#A30000",children:"Stop recording"})}),label:"",labelPlacement:"end",sx:{display:"flex",marginTop:"5px",marginLeft:"30px"}})]})]})})]})}function w(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)({active:!1,available:!1,url:""}),i=Object(d.a)(a,2),o=i[0],s=i[1],l=Object(r.useState)({active:!1,available:!1,url:""}),j=Object(d.a)(l,2),O=j[0],x=j[1],v=Object(r.useRef)([]),f=Object(r.useRef)([]),h=Object(r.useRef)(null),p=Object(r.useRef)(null),m=Object(r.useRef)(null),w=function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:!0},e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:m.current=e.sent,alert("Got permission"),k(),n(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error accessing media devices.",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(){return"Safari"===(window.navigator.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[])[1]?"audio/mp4":"audio/webm"},k=function(){h.current=new MediaRecorder(m.current,{mimeType:R()}),p.current=new MediaRecorder(m.current,{mimeType:R()}),h.current.ondataavailable=function(e){v.current.push(e.data)},h.current.onstop=function(){var e=URL.createObjectURL(new Blob(v.current));v.current=[],s({active:!1,available:!0,url:e})},p.current.ondataavailable=function(e){f.current.push(e.data)},p.current.onstop=function(){var e=URL.createObjectURL(new Blob(f.current));f.current=[],x({active:!1,available:!0,url:e})}},y=function(e,t){v.current=[],e.start(),t({active:!0,available:!1,url:""})};return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),c?Object(g.jsxs)("div",{className:"audio-container",children:[Object(g.jsx)("h2",{children:"Recording 1"}),Object(g.jsx)("button",{className:o.active?"active":null,disabled:o.active,onClick:function(){return y(h.current,s)},children:"Start Recording 1"}),o.active&&Object(g.jsx)("p",{children:"Recording in progress"}),Object(g.jsx)("button",{disabled:!o.active,onClick:function(){h.current.stop()},children:"Stop Recording 1"}),o.available&&Object(g.jsx)("audio",{controls:!0,src:o.url}),Object(g.jsx)("h2",{children:"Recording 2"}),Object(g.jsx)("button",{className:O.active?"active":null,disabled:O.active,onClick:function(){return y(p.current,x)},children:"Start Recording 2"}),O.active&&Object(g.jsx)("p",{children:"Recording in progress"}),Object(g.jsx)("button",{disabled:!O.active,onClick:function(){p.current.stop()},children:"Stop Recording 2"}),O.available&&Object(g.jsx)("audio",{controls:!0,src:O.url})]}):Object(g.jsx)("button",{onClick:w,children:"Get Mic Access"})]})}var R=function(){var e=Object(s.f)();return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return e("/video")},children:"  Check video"}),Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return e("/audio")},children:" Check audio"}),Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return e("/playVideo")},children:" Play video"}),Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{})," ",Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return e("/face")},children:" Detect face"})]})},k=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(x.a,{url:"https://www.youtube.com/watch?v=GCsxgn4j8ag",controls:!0,width:"680px",height:"378px"})})};c(87),c(88);var y=function(){var e=r.useState(!1),t=Object(d.a)(e,2),c=(t[0],t[1]),n=r.useRef(null);r.useEffect((function(){i(),a()}),[n]);var a=function(){navigator.mediaDevices.getUserMedia({video:{width:350,height:350}}).then((function(e){var t=n.current;t.muted=!0,t.srcObject=e,t.setAttribute("playsinline",""),t.play()})).catch((function(e){console.error("error:",e)}))},i=function(){var e=document.getElementById("video"),t=document.getElementById("canvas"),r=t.getContext("2d"),n=new tracking.ObjectTracker(["face"]);tracking.track("#video",n),n.on("track",(function(a){console.log(a),r.clearRect(0,0,"350","350"),a.data.forEach((function(a){if(console.log("react value ",a),r.strokeStyle="#F8E71C",r.lineWidth=2,r.strokeRect(a.x,a.y,"162","162"),a.x>110&&a.x<190&&a.y>110&&a.y<190){r.drawImage(e,0,0,"350","350");var i=t.toDataURL("image/jpeg");console.log(i),n.removeAllListeners(),c(!0)}}))}))};return Object(g.jsxs)("div",{className:"Container",children:[Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("video",{id:"video",ref:n,width:"350px",height:"350px"}),Object(g.jsx)("canvas",{id:"canvas",width:"350px",height:"350px"})]})},C=function(){return Object(g.jsx)(o.a,{children:Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:"/device-test",element:Object(g.jsx)(R,{})}),Object(g.jsx)(s.a,{path:"/video",element:Object(g.jsx)(m,{})}),Object(g.jsx)(s.a,{path:"/audio",element:Object(g.jsx)(w,{})}),Object(g.jsx)(s.a,{path:"/playVideo",element:Object(g.jsx)(k,{})}),Object(g.jsx)(s.a,{path:"/face",element:Object(g.jsx)(y,{})})]})})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,111)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),r(e),n(e),a(e),i(e)}))};i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(C,{})}),document.getElementById("root")),S()}},[[89,1,2]]]);
//# sourceMappingURL=main.0ee10778.chunk.js.map